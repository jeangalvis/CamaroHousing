<div class="container mt-5 mb-5">
  <div class="d-flex justify-content-center">
    <form
      [formGroup]="registerForm"
      class="col-sm-12 col-md-8 col-lg-6 col-xl-4"
      (submit)="onSubmit($event)"
    >
      <div class="mb-3">
        <label for="InputEmail" class="form-label">Correo Electronico*</label>
        <input
          type="email"
          class="form-control"
          id="InputEmail"
          aria-describedby="emailHelp"
          name="email"
          formControlName="email"
          [ngClass]="{
            'is-invalid':
              hasErrors('email', 'required') ||
              hasErrors('email', 'email') ||
              hasErrors('email', 'minlength') ||
              hasErrors('email', 'maxlength')
          }"
        />
        @if (showErrors) { @if (hasErrors('email', 'required')) {
        <span class="text-danger">El correo electronico es requerido.</span>
        } @else if (hasErrors('email', 'email')) {
        <span class="text-danger">Debes ingresar un correo valido.</span>
        } @else if (hasErrors('email', 'minlength')) {
        <span class="text-danger"
          >El correo no puede ser menor de 5 caracteres.</span
        >
        } @else if (hasErrors('email', 'maxlength')) {
        <span class="text-danger"
          >El correo no puede ser mayor de 100 caracteres.</span
        >
        } }
        <div id="emailHelp" class="form-text">
          Nunca compartiremos tu correo con nadie.
        </div>
      </div>
      <div class="mb-3">
        <label for="InputUsername" class="form-label">Usuario*</label>
        <input
          type="text"
          class="form-control"
          id="InputUsername"
          name="username"
          formControlName="username"
          [ngClass]="{
            'is-invalid':
              hasErrors('username', 'required') ||
              hasErrors('username', 'minlength') ||
              hasErrors('username', 'maxlength')
          }"
        />
        @if (showErrors) { @if (hasErrors('username', 'required')) {
        <span class="text-danger">El nombre de usuario es requerido.</span>
        }@else if (hasErrors('username', 'minlength')) {
        <span class="text-danger"
          >El nombre de usuario debe ser minimo 5 caracteres.</span
        >
        }@else if (hasErrors('username', 'maxlength')) {
        <span class="text-danger"
          >El nombre de usuario debe ser maximo 50 caracteres.</span
        >
        } }
      </div>
      <div class="mb-3">
        <label for="InputPassword" class="form-label">Contraseña*</label>
        <input
          type="password"
          class="form-control"
          id="InputPassword"
          name="password"
          formControlName="password"
          [ngClass]="{
            'is-invalid':
              hasErrors('password', 'required') ||
              hasErrors('password', 'minlength') ||
              hasErrors('password', 'maxlength')
          }"
        />
        @if (showErrors) { @if (hasErrors('password', 'required')) {
        <span class="text-danger">El campo es requerido.</span>
        }@else if (hasErrors('password', 'minlength')) {
        <span class="text-danger">El ncampo debe ser minimo 8 caracteres.</span>
        }@else if (hasErrors('password', 'maxlength')) {
        <span class="text-danger"
          >El campo debe ser maximo 255 caracteres.</span
        >
        } }
      </div>
      <div class="mb-3">
        <label for="InputVerifyPassword" class="form-label"
          >Verificar Contraseña*</label
        >
        <input
          type="password"
          class="form-control"
          id="InputVerifyPassword"
          name="verifyPassword"
          formControlName="verifyPassword"
          [ngClass]="{
            'is-invalid':
              showErrors &&
              (registerForm.get('verifyPassword')?.hasError('required') ||
                registerForm.hasError('mismatch'))
          }"
        />
        @if (showErrors) { @if (registerForm.get('verifyPassword')?.hasError('required')) {
        <span class="text-danger">El campo es requerido.</span>
        }@else if (registerForm.hasError('mismatch')) {
        <span class="text-danger">Las contraseñas no coinciden.</span>
        } }
      </div>
      <button type="submit" class="btn btn-register">Registrarse</button>
      @if (successMessage) {
      <div class="alert alert-success mt-3 text-center" role="alert">
        {{ successMessage }}
      </div>
      }@else if(userRegisteredMessage) {
      <div class="alert alert-info mt-3 text-center" role="alert">
        {{ userRegisteredMessage }}
      </div>
      } @else if(ErrorMessage){
      <div class="alert alert-danger mt-3 text-center" role="alert">
        {{ ErrorMessage }}
      </div>
      }
    </form>
  </div>
</div>
